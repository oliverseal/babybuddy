{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Home A buddy for babies! Helps caregivers track sleep, feedings, diaper changes, tummy time and more to learn about and predict baby's needs without ( as much ) guess work. Demo A demo of Baby Buddy is available on Heroku. The demo instance resets every hour. Login credentials are: Username: admin Password: admin","title":"Home"},{"location":"#home","text":"A buddy for babies! Helps caregivers track sleep, feedings, diaper changes, tummy time and more to learn about and predict baby's needs without ( as much ) guess work.","title":"Home"},{"location":"#demo","text":"A demo of Baby Buddy is available on Heroku. The demo instance resets every hour. Login credentials are: Username: admin Password: admin","title":"Demo"},{"location":"api/","text":"API Baby Buddy uses the Django REST Framework (DRF) to provide a REST API. The only requirement for (most) requests is to set the Authorization header as described in the Authentication section. The one exception is the /api endpoint, which lists all available endpoints and does not require authorization. Currently, the following endpoints are available for GET , OPTIONS , and POST requests: /api/children/ /api/changes/ (Diaper Changes) /api/feedings/ /api/notes/ /api/sleep/ /api/temperature/ /api/timers/ /api/tummy-times/ /api/weight/ Authentication The TokenAuthentication and SessionAuthentication are enabled by default. Session authentication covers local API requests made by the application itself. Token authentication allows external requests to be made. :exclamation: In a production environment, token authentication should only be used for API calls to an https endpoint. :exclamation: Each user has an API key that can be used for token authentication. This key can be found on the User Settings page for the logged in the user. To use a key for an API request, set the request Authorization header to Token <user-key> . E.g. Authorization: Token 2h23807gd72h7hop382p98hd823dw3g665g56 If no Authorization header set, or the key is not valid the API will return 403 Forbidden with additional details in the response body. Schema The API schema in OpenAPI format can be found in the openapi-schema.yml file in the project root. A live version is also available at the /api/schema path of a running instance. GET Method Request The limit and offset request parameters can be used to limit and offset the results set respectively. For example, the following request will return five diaper changes starting from the 10th diaper change entry: curl -X GET 'https://[...]/api/changes/?limit=5&offset=10' -H 'Authorization: Token [...]' { \"count\": <int>, \"next\": \"https://[...]/api/changes/?limit=5&offset=15\", \"previous\": \"https://[...]/api/changes/?limit=5&offset=5\", \"results\": [...] } Field-based filters for specific endpoints can be found the in the filters field of the OPTIONS response for specific endpoints. Single entries can also be retrieved by adding the ID (or in the case of a Child entry, the slug) of a particular entry: curl -X GET https://[...]/api/children/gregory-hill/ -H 'Authorization: Token [...]' { \"id\":3, \"first_name\":\"Gregory\", \"last_name\":\"Hill\", \"birth_date\":\"2020-02-11\", \"slug\":\"gregory-hill\", \"picture\":null } curl -X GET https://[...]/api/sleep/1/ -H 'Authorization: Token [...]' { \"id\":480, \"child\":3, \"start\":\"2020-03-12T21:25:28.916016-07:00\", \"end\":\"2020-03-13T01:34:28.916016-07:00\", \"duration\":\"04:09:00\", \"nap\":false } Response Returns JSON data in the response body in the following format: { \"count\":<int>, \"next\":<url>, \"previous\":<url>, \"results\":[{...}] } count : Total number of records ( in the database , not just the response). next : URL for the next set of results. previous : URL for the previous set of results. results : An array of the results of the request. For single entries, returns JSON data in the response body keyed by model field names. This will vary between models. OPTIONS Method Request All endpoints will respond to an OPTIONS request with detailed information about the endpoint's purpose, parameters, filters, etc. Response Returns JSON data in the response body describing the endpoint, available options for POST requests, and available filters for GET requests. The following example describes the /api/children endpoint: { \"name\": \"Child List\", \"renders\": [ \"application/json\", \"text/html\" ], \"parses\": [ \"application/json\", \"application/x-www-form-urlencoded\", \"multipart/form-data\" ], \"actions\": { \"POST\": { \"id\": { \"type\": \"integer\", \"required\": false, \"read_only\": true, \"label\": \"ID\" }, [...] } }, \"filters\": [ \"first_name\", \"last_name\", \"slug\" ] } POST Method Request To add new entries for a particular endpoint, send a POST request with the entry data in JSON format in the request body. The Content-Type header for POST request must be set to application/json . Regular sanity checks will be performed on relevant data. See the OPTIONS response for a particular endpoint for details on required fields and data formats. Timer Field The \"timer\" field is a special field available for POST operations to model endpoints supporting duration (Feeding, Sleep, Tummy Time). Se the \"timer\" in a request to fill in the start and end fields automatically using the start and end values from the Timer (the Timer will be stopped if it is currently running). Additionally, if the Timer has a Child relationship, the child field will be filled in automatically use the child value from the Timer. The \"timer\" field will always override the relevant fields ( child , start , and end ) on the request. E.g., a POST request with both the timer and end fields will ignore the end field value and replace it with the Timer's end value. The same applies for start and child . These fields are all required if the timer field is not set. Response Returns JSON data in the response body describing the added/updated instance or error details keyed by either the field in error or the general string non_field_errors (e.g., when validation involves multiple fields). PATCH Method Request To update existing entries, send a PATCH request to the single entry endpoint for the entry to be updated. The Content-Type header for PATCH request must be set to application/json . For example, to update a Diaper Change entry with ID 947 to indicate a \"wet\" diaper only: curl -X PATCH \\ -H 'Authorization: Token [...]' \\ -H \"Content-Type: application/json\" \\ -d '{\"wet\":1, \"solid\":0}' \\ https://[...]/api/changes/947/ Regular sanity checks will be performed on relevant data. See the OPTIONS response for a particular endpoint for details on required fields and data formats. Response Returns JSON data in the response body describing the added/updated instance or error details keyed by either the field in error or the general string non_field_errors (e.g., when validation involves multiple fields). DELETE Method Request To delete an existing entry, send a DELETE request to the single entry endpoint to be deleted. For example, to delete a Diaper Change entry with ID 947: curl -X DELETE https://[...]/api/changes/947/ -H 'Authorization: Token [...]' Response Returns an empty response with HTTP status code 204 on success, or a JSON encoded error detail if an error occurred (e.g. {\"detail\":\"Not found.\"} if the requested ID does not exist).","title":"API"},{"location":"api/#api","text":"Baby Buddy uses the Django REST Framework (DRF) to provide a REST API. The only requirement for (most) requests is to set the Authorization header as described in the Authentication section. The one exception is the /api endpoint, which lists all available endpoints and does not require authorization. Currently, the following endpoints are available for GET , OPTIONS , and POST requests: /api/children/ /api/changes/ (Diaper Changes) /api/feedings/ /api/notes/ /api/sleep/ /api/temperature/ /api/timers/ /api/tummy-times/ /api/weight/","title":"API"},{"location":"api/#authentication","text":"The TokenAuthentication and SessionAuthentication are enabled by default. Session authentication covers local API requests made by the application itself. Token authentication allows external requests to be made. :exclamation: In a production environment, token authentication should only be used for API calls to an https endpoint. :exclamation: Each user has an API key that can be used for token authentication. This key can be found on the User Settings page for the logged in the user. To use a key for an API request, set the request Authorization header to Token <user-key> . E.g. Authorization: Token 2h23807gd72h7hop382p98hd823dw3g665g56 If no Authorization header set, or the key is not valid the API will return 403 Forbidden with additional details in the response body.","title":"Authentication"},{"location":"api/#schema","text":"The API schema in OpenAPI format can be found in the openapi-schema.yml file in the project root. A live version is also available at the /api/schema path of a running instance.","title":"Schema"},{"location":"api/#get-method","text":"","title":"GET Method"},{"location":"api/#request","text":"The limit and offset request parameters can be used to limit and offset the results set respectively. For example, the following request will return five diaper changes starting from the 10th diaper change entry: curl -X GET 'https://[...]/api/changes/?limit=5&offset=10' -H 'Authorization: Token [...]' { \"count\": <int>, \"next\": \"https://[...]/api/changes/?limit=5&offset=15\", \"previous\": \"https://[...]/api/changes/?limit=5&offset=5\", \"results\": [...] } Field-based filters for specific endpoints can be found the in the filters field of the OPTIONS response for specific endpoints. Single entries can also be retrieved by adding the ID (or in the case of a Child entry, the slug) of a particular entry: curl -X GET https://[...]/api/children/gregory-hill/ -H 'Authorization: Token [...]' { \"id\":3, \"first_name\":\"Gregory\", \"last_name\":\"Hill\", \"birth_date\":\"2020-02-11\", \"slug\":\"gregory-hill\", \"picture\":null } curl -X GET https://[...]/api/sleep/1/ -H 'Authorization: Token [...]' { \"id\":480, \"child\":3, \"start\":\"2020-03-12T21:25:28.916016-07:00\", \"end\":\"2020-03-13T01:34:28.916016-07:00\", \"duration\":\"04:09:00\", \"nap\":false }","title":"Request"},{"location":"api/#response","text":"Returns JSON data in the response body in the following format: { \"count\":<int>, \"next\":<url>, \"previous\":<url>, \"results\":[{...}] } count : Total number of records ( in the database , not just the response). next : URL for the next set of results. previous : URL for the previous set of results. results : An array of the results of the request. For single entries, returns JSON data in the response body keyed by model field names. This will vary between models.","title":"Response"},{"location":"api/#options-method","text":"","title":"OPTIONS Method"},{"location":"api/#request_1","text":"All endpoints will respond to an OPTIONS request with detailed information about the endpoint's purpose, parameters, filters, etc.","title":"Request"},{"location":"api/#response_1","text":"Returns JSON data in the response body describing the endpoint, available options for POST requests, and available filters for GET requests. The following example describes the /api/children endpoint: { \"name\": \"Child List\", \"renders\": [ \"application/json\", \"text/html\" ], \"parses\": [ \"application/json\", \"application/x-www-form-urlencoded\", \"multipart/form-data\" ], \"actions\": { \"POST\": { \"id\": { \"type\": \"integer\", \"required\": false, \"read_only\": true, \"label\": \"ID\" }, [...] } }, \"filters\": [ \"first_name\", \"last_name\", \"slug\" ] }","title":"Response"},{"location":"api/#post-method","text":"","title":"POST Method"},{"location":"api/#request_2","text":"To add new entries for a particular endpoint, send a POST request with the entry data in JSON format in the request body. The Content-Type header for POST request must be set to application/json . Regular sanity checks will be performed on relevant data. See the OPTIONS response for a particular endpoint for details on required fields and data formats.","title":"Request"},{"location":"api/#timer-field","text":"The \"timer\" field is a special field available for POST operations to model endpoints supporting duration (Feeding, Sleep, Tummy Time). Se the \"timer\" in a request to fill in the start and end fields automatically using the start and end values from the Timer (the Timer will be stopped if it is currently running). Additionally, if the Timer has a Child relationship, the child field will be filled in automatically use the child value from the Timer. The \"timer\" field will always override the relevant fields ( child , start , and end ) on the request. E.g., a POST request with both the timer and end fields will ignore the end field value and replace it with the Timer's end value. The same applies for start and child . These fields are all required if the timer field is not set.","title":"Timer Field"},{"location":"api/#response_2","text":"Returns JSON data in the response body describing the added/updated instance or error details keyed by either the field in error or the general string non_field_errors (e.g., when validation involves multiple fields).","title":"Response"},{"location":"api/#patch-method","text":"","title":"PATCH Method"},{"location":"api/#request_3","text":"To update existing entries, send a PATCH request to the single entry endpoint for the entry to be updated. The Content-Type header for PATCH request must be set to application/json . For example, to update a Diaper Change entry with ID 947 to indicate a \"wet\" diaper only: curl -X PATCH \\ -H 'Authorization: Token [...]' \\ -H \"Content-Type: application/json\" \\ -d '{\"wet\":1, \"solid\":0}' \\ https://[...]/api/changes/947/ Regular sanity checks will be performed on relevant data. See the OPTIONS response for a particular endpoint for details on required fields and data formats.","title":"Request"},{"location":"api/#response_3","text":"Returns JSON data in the response body describing the added/updated instance or error details keyed by either the field in error or the general string non_field_errors (e.g., when validation involves multiple fields).","title":"Response"},{"location":"api/#delete-method","text":"","title":"DELETE Method"},{"location":"api/#request_4","text":"To delete an existing entry, send a DELETE request to the single entry endpoint to be deleted. For example, to delete a Diaper Change entry with ID 947: curl -X DELETE https://[...]/api/changes/947/ -H 'Authorization: Token [...]'","title":"Request"},{"location":"api/#response_4","text":"Returns an empty response with HTTP status code 204 on success, or a JSON encoded error detail if an error occurred (e.g. {\"detail\":\"Not found.\"} if the requested ID does not exist).","title":"Response"},{"location":"configuration/","text":"Configuration Environment variables can be used to define a number of configuration settings. Baby Buddy will check the application directory structure for an .env file or take these variables from the system environment. System environment variables take precedence over the contents of an .env file. ALLOWED_HOSTS ALLOW_UPLOADS AWS_ACCESS_KEY_ID AWS_SECRET_ACCESS_KEY AWS_STORAGE_BUCKET_NAME DEBUG NAP_START_MAX NAP_START_MIN DB_ENGINE DB_HOST DB_NAME DB_PASSWORD DB_PORT DB_USER SECRET_KEY SECURE_PROXY_SSL_HEADER TIME_ZONE USE_24_HOUR_TIME_FORMAT ALLOWED_HOSTS Default: * (any) Set this variable to a single host or comma-separated list of hosts without spaces. This should always be set to a specific host or hosts in production deployments. See also: Django's documentation on the ALLOWED_HOSTS setting ALLOW_UPLOADS Default: True Whether to allow uploads (e.g., of Child photos). For some deployments (Heroku) this setting will default to False due to the lack of available persistent storage. AWS_ACCESS_KEY_ID Default: None Required to access your AWS S3 bucket, should be uniquely generated per bucket for security. See also: AWS_STORAGE_BUCKET_NAME AWS_SECRET_ACCESS_KEY Default: None Required to access your AWS S3 bucket, should be uniquely generated per bucket for security. See also: AWS_STORAGE_BUCKET_NAME AWS_STORAGE_BUCKET_NAME Default: None If you would like to use AWS S3 for storage on ephemeral storage platforms like Heroku you will need to create a bucket and add its name. See django-storages' Amazon S3 documentation . DEBUG Default: False When in debug mode, Baby Buddy will print much more detailed error information for exceptions. This setting should be False in production deployments. See also Django's documentation on the DEBUG setting . NAP_START_MAX Default: 18:00 The maximum nap start time (in the instance's time zone). Expects the 24-hour format %H:%M. NAP_START_MIN Default: 06:00 The minimum nap start time (in the instance's time zone). Expects the 24-hour format %H:%M. DB_ENGINE Default: django.db.backends.postgresql The database engine utilized for the deployment. See also Django's documentation on the ENGINE setting . DB_HOST Default: db The name of the database host for the deployment. DB_NAME Default: postgres The name of the database table utilized for the deployment. DB_PASSWORD No Default The password for the database user for the deployment. In the default example, this is the root PostgreSQL password. DB_PORT Default: 5432 The listening port for the database. The default port is 5432 for PostgreSQL. DB_USER Default: postgres The database username utilized for the deployment. SECRET_KEY Default: None A random, unique string must be set as the \"secret key\" before Baby Buddy can be deployed and run. See also Django's documentation on the SECRET_KEY setting . SECURE_PROXY_SSL_HEADER Default: None If Baby Buddy is behind a proxy, you may need to set this to True in order to trust the X-Forwarded-Proto header that comes from your proxy, and any time its value is \"https\". This guarantees the request is secure (i.e., it originally came in via HTTPS). :warning: Modifying this setting can compromise Baby Buddy\u2019s security. Ensure you fully understand your setup before changing it. See also Django's documentation on the SECURE_PROXY_SSL_HEADER setting . TIME_ZONE Default: UTC The default time zone to use for the instance. See List of tz database time zones for all possible values. This value can be overridden per use from the user settings form. USE_24_HOUR_TIME_FORMAT Default: False Whether to force 24-hour time format for locales that do not ordinarily use it (e.g. en ). Support for this feature must be implemented on a per-locale basis. See format files under babybuddy/formats for supported locales. Note: Baby Buddy interprets this value as a boolean from a string using Python's built-in strtobool tool. Only certain strings will work (e.g., \"True\" for True and \"False\" for False ), other unrecognized strings will cause a ValueError and prevent Baby Buddy from loading.","title":"Configuration"},{"location":"configuration/#configuration","text":"Environment variables can be used to define a number of configuration settings. Baby Buddy will check the application directory structure for an .env file or take these variables from the system environment. System environment variables take precedence over the contents of an .env file. ALLOWED_HOSTS ALLOW_UPLOADS AWS_ACCESS_KEY_ID AWS_SECRET_ACCESS_KEY AWS_STORAGE_BUCKET_NAME DEBUG NAP_START_MAX NAP_START_MIN DB_ENGINE DB_HOST DB_NAME DB_PASSWORD DB_PORT DB_USER SECRET_KEY SECURE_PROXY_SSL_HEADER TIME_ZONE USE_24_HOUR_TIME_FORMAT","title":"Configuration"},{"location":"configuration/#allowed_hosts","text":"Default: * (any) Set this variable to a single host or comma-separated list of hosts without spaces. This should always be set to a specific host or hosts in production deployments. See also: Django's documentation on the ALLOWED_HOSTS setting","title":"ALLOWED_HOSTS"},{"location":"configuration/#allow_uploads","text":"Default: True Whether to allow uploads (e.g., of Child photos). For some deployments (Heroku) this setting will default to False due to the lack of available persistent storage.","title":"ALLOW_UPLOADS"},{"location":"configuration/#aws_access_key_id","text":"Default: None Required to access your AWS S3 bucket, should be uniquely generated per bucket for security. See also: AWS_STORAGE_BUCKET_NAME","title":"AWS_ACCESS_KEY_ID"},{"location":"configuration/#aws_secret_access_key","text":"Default: None Required to access your AWS S3 bucket, should be uniquely generated per bucket for security. See also: AWS_STORAGE_BUCKET_NAME","title":"AWS_SECRET_ACCESS_KEY"},{"location":"configuration/#aws_storage_bucket_name","text":"Default: None If you would like to use AWS S3 for storage on ephemeral storage platforms like Heroku you will need to create a bucket and add its name. See django-storages' Amazon S3 documentation .","title":"AWS_STORAGE_BUCKET_NAME"},{"location":"configuration/#debug","text":"Default: False When in debug mode, Baby Buddy will print much more detailed error information for exceptions. This setting should be False in production deployments. See also Django's documentation on the DEBUG setting .","title":"DEBUG"},{"location":"configuration/#nap_start_max","text":"Default: 18:00 The maximum nap start time (in the instance's time zone). Expects the 24-hour format %H:%M.","title":"NAP_START_MAX"},{"location":"configuration/#nap_start_min","text":"Default: 06:00 The minimum nap start time (in the instance's time zone). Expects the 24-hour format %H:%M.","title":"NAP_START_MIN"},{"location":"configuration/#db_engine","text":"Default: django.db.backends.postgresql The database engine utilized for the deployment. See also Django's documentation on the ENGINE setting .","title":"DB_ENGINE"},{"location":"configuration/#db_host","text":"Default: db The name of the database host for the deployment.","title":"DB_HOST"},{"location":"configuration/#db_name","text":"Default: postgres The name of the database table utilized for the deployment.","title":"DB_NAME"},{"location":"configuration/#db_password","text":"No Default The password for the database user for the deployment. In the default example, this is the root PostgreSQL password.","title":"DB_PASSWORD"},{"location":"configuration/#db_port","text":"Default: 5432 The listening port for the database. The default port is 5432 for PostgreSQL.","title":"DB_PORT"},{"location":"configuration/#db_user","text":"Default: postgres The database username utilized for the deployment.","title":"DB_USER"},{"location":"configuration/#secret_key","text":"Default: None A random, unique string must be set as the \"secret key\" before Baby Buddy can be deployed and run. See also Django's documentation on the SECRET_KEY setting .","title":"SECRET_KEY"},{"location":"configuration/#secure_proxy_ssl_header","text":"Default: None If Baby Buddy is behind a proxy, you may need to set this to True in order to trust the X-Forwarded-Proto header that comes from your proxy, and any time its value is \"https\". This guarantees the request is secure (i.e., it originally came in via HTTPS). :warning: Modifying this setting can compromise Baby Buddy\u2019s security. Ensure you fully understand your setup before changing it. See also Django's documentation on the SECURE_PROXY_SSL_HEADER setting .","title":"SECURE_PROXY_SSL_HEADER"},{"location":"configuration/#time_zone","text":"Default: UTC The default time zone to use for the instance. See List of tz database time zones for all possible values. This value can be overridden per use from the user settings form.","title":"TIME_ZONE"},{"location":"configuration/#use_24_hour_time_format","text":"Default: False Whether to force 24-hour time format for locales that do not ordinarily use it (e.g. en ). Support for this feature must be implemented on a per-locale basis. See format files under babybuddy/formats for supported locales. Note: Baby Buddy interprets this value as a boolean from a string using Python's built-in strtobool tool. Only certain strings will work (e.g., \"True\" for True and \"False\" for False ), other unrecognized strings will cause a ValueError and prevent Baby Buddy from loading.","title":"USE_24_HOUR_TIME_FORMAT"},{"location":"contributing/","text":"Contributing Baby Buddy's maintainers accept and encourage contributions via GitHub Issues and Pull Requests . Maintainers and users may also be found at babybuddy/Lobby on Gitter. Pull request process Fork this repository and commit your changes. Make and commit tests for any new features or major functionality changes. Run gulp lint and gulp test (see Gulp Commands ) and ensure that all tests pass. Updated static assets if necessary and commit the /static folder (see gulp updatestatic ). Open a new pull request against the master branch. Maintainers will review new pull requests will as soon as possible, and we will do our best to provide feedback and support potential contributors. Translation POEditor Baby Buddy uses POEditor for translation contributions. Interested contributors can join translation of Baby Buddy for access to a simple, web-based frontend for adding/editing translation files to the project. Manual Baby Buddy has support for translation/localization. A manual translation process will look something like this: Set up a development environment (see Development below). Run gulp makemessages -l xx where xx is a specific locale code in the ISO 639-1 format (e.g., \"il\" for Italian or \"es\" for Spanish). This creates a new translation file at locale/xx/LC_MESSAGES/django.po , or updates one if it exists. Open the created/updated django.po file and update the header template with license and contact info. Start translating! Each translatable string will have a msgid value with the string in English and a corresponding (empty) msgstr value where a translated string can be filled in. Once all strings have been translated, run gulp compilemessages -l xx to compile an optimized translation file ( locale/xx/LC_MESSAGES/django.mo ). To expose the new translation as a user setting, add the locale code to the LANGUAGES array in the base settings file ( babybuddy/settings/base.py ). Check if Plotly offers a translation (in node_modules/plotly.js/dist/ ) for the language. If it does: Add the Plotly translation file path to gulpfile.config.js in scriptsConfig.graph . Build, collect, and commit the /static folder (see gulp updatestatic ). Check if Moment offers a translation (in node_modules/moment/locale/ ) for the language. If it does: Add the Moment translation file path to gulpfile.config.js in scriptsConfig.vendor . Build, collect, and commit the /static folder (see gulp updatestatic ). Run the development server, log in, and update the user language to test the newly translated strings. Once the translation is complete, commit the new files and changes to a fork and create a pull request for review. For more information on the Django translation process, see Django's documentation section: Translation . Development Requirements Python 3.6+, pip, pipenv NVM (NodeJS 14.x and NPM 7.x) Gulp Possibly libpq-dev This is necessary if psycopg2 can't find an appropriate prebuilt binary. Installation Install pipenv per Installing pipenv Install required Python packages, including dev packages pipenv install --three --dev If this fails, install libpq-dev (e.g. sudo apt install libpq-dev ) and try again. Installed Node 14.x (if necessary) nvm install 14 Activate Node 14.x nvm use Install Gulp CLI npm install -g gulp-cli Install required Node packages npm install Set, at least, the DJANGO_SETTINGS_MODULE environment variable export DJANGO_SETTINGS_MODULE=babybuddy.settings.development This process will differ based on the host OS. The above example is for Linux-based systems. See Configuration for other settings and methods for defining them. Migrate the database gulp migrate Create cache table gulp createcachetable Build assets and run the server gulp This command will also watch for file system changes to rebuild assets and restart the server as needed. Open http://127.0.0.1:8000 and log in with the default username and password ( admin / admin ). Gulp commands gulpfile.js defines Baby Buddy's Gulp commands. babybuddy/management/commands defines Baby Buddy's management commands. gulp gulp build gulp clean gulp collectstatic gulp compilemessages gulp coverage gulp createcachetable gulp docs:build gulp docs:deploy gulp docs:watch gulp extras gulp fake gulp generatescheme gulp lint gulp makemessages gulp makemigrations gulp migrate gulp reset gulp runserver gulp scripts gulp styles gulp test gulp updatestatic gulp Executes the build and watch commands and runs Django's development server. This command also accepts the special parameter --ip for setting the server IP address. See gulp runserver for details. build Creates all script, style and \"extra\" assets and places them in the babybuddy/static folder. docs:build Builds the documentation site in a local directory ( site by default). docs:deploy Deploys the documentation site to GitHub Pages. docs:watch Runs a local server for the documentation site reloading whenever documentation sites files (in the docs directory) as modified. clean Deletes all build folders and the root static folder. Generally this should be run before a gulp build to remove previous build files and the generated static assets. collectstatic Executes Django's collectstatic management task. This task relies on files in the babybuddy/static folder, so generally gulp build should be run before this command for production deployments. Gulp also passes along non-overlapping arguments for this command, e.g. --no-input . Note: a SECRET_KEY value must be set for this command to work. compilemessages Executes Django's compilemessages management task. See django-admin compilemessages for more details about other options and functionality of this command. coverage Create a test coverage report. See .coveragerc for default settings information. createcachetable Executes Django's createcachetable management task. See django-admin createcachetable for more details about other options and functionality of this command. extras Copies \"extra\" files (fonts, images and server root contents) to the build folder. fake Adds some fake data to the database. By default, fake creates one child and 31 days of random data. Use the --children and --days flags to change the default values, e.g. gulp fake --children 5 --days 7 to generate five fake children and seven days of data for each. generateschema Updates the openapi-schema.yml file in the project root based on current API functionality. lint Executes Python and SASS linting for all relevant source files. makemessages Executes Django's makemessages management task. See django-admin makemessages for more details about other options and functionality of this command. When working on a single translation, the -l flag is useful to make message for only that language, e.g. gulp makemessages -l fr to make only a French language translation file. makemigrations Executes Django's makemigrations management task. Gulp also passes along non-overlapping arguments for this command. migrate Executes Django's migrate management task. In addition to migrating the database, this command creates the default admin user. Gulp also passes along non-overlapping arguments for this command. reset Resets the database to a default state with one fake child and 31 days of fake data. runserver Executes Django's runserver management task. Gulp passes non-overlapping arguments for this command. A special parameter, --ip , is also available to set the IP for the server. E.g., execute gulp runserver --ip 0.0.0.0:8000 to make the server available to other devices on your local network. scripts Builds and combines relevant application scripts. Generally this command does not need to be executed independently - see the build command. styles Builds and combines SASS styles in to CSS files. Generally this command does not need to be executed independently - see the build command. test Executes Baby Buddy's suite of tests. Gulp also passes along non-overlapping arguments for this command, however individual tests cannot be run with this command. python manage.py test can be used for individual test execution. updateglyphs Downloads generated glyph font files data from Fonttello based on config.json file . This only needs to be run after making changes to the config file. updatestatic Rebuilds Baby Buddy's /static folder by running the following commands in order: lint clean build collectstatic Execute and commit changes made by this command whenever changing Baby Buddy's frontend code (SASS, JS, etc.). Icon Font Baby Buddy uses Fontello to build a custom icon font for icons used throughout the application. See babybuddy/static_src/fontello for further documentation about using the config file with Fontello and license information for fonts used by this application.","title":"Contributing"},{"location":"contributing/#contributing","text":"Baby Buddy's maintainers accept and encourage contributions via GitHub Issues and Pull Requests . Maintainers and users may also be found at babybuddy/Lobby on Gitter.","title":"Contributing"},{"location":"contributing/#pull-request-process","text":"Fork this repository and commit your changes. Make and commit tests for any new features or major functionality changes. Run gulp lint and gulp test (see Gulp Commands ) and ensure that all tests pass. Updated static assets if necessary and commit the /static folder (see gulp updatestatic ). Open a new pull request against the master branch. Maintainers will review new pull requests will as soon as possible, and we will do our best to provide feedback and support potential contributors.","title":"Pull request process"},{"location":"contributing/#translation","text":"","title":"Translation"},{"location":"contributing/#poeditor","text":"Baby Buddy uses POEditor for translation contributions. Interested contributors can join translation of Baby Buddy for access to a simple, web-based frontend for adding/editing translation files to the project.","title":"POEditor"},{"location":"contributing/#manual","text":"Baby Buddy has support for translation/localization. A manual translation process will look something like this: Set up a development environment (see Development below). Run gulp makemessages -l xx where xx is a specific locale code in the ISO 639-1 format (e.g., \"il\" for Italian or \"es\" for Spanish). This creates a new translation file at locale/xx/LC_MESSAGES/django.po , or updates one if it exists. Open the created/updated django.po file and update the header template with license and contact info. Start translating! Each translatable string will have a msgid value with the string in English and a corresponding (empty) msgstr value where a translated string can be filled in. Once all strings have been translated, run gulp compilemessages -l xx to compile an optimized translation file ( locale/xx/LC_MESSAGES/django.mo ). To expose the new translation as a user setting, add the locale code to the LANGUAGES array in the base settings file ( babybuddy/settings/base.py ). Check if Plotly offers a translation (in node_modules/plotly.js/dist/ ) for the language. If it does: Add the Plotly translation file path to gulpfile.config.js in scriptsConfig.graph . Build, collect, and commit the /static folder (see gulp updatestatic ). Check if Moment offers a translation (in node_modules/moment/locale/ ) for the language. If it does: Add the Moment translation file path to gulpfile.config.js in scriptsConfig.vendor . Build, collect, and commit the /static folder (see gulp updatestatic ). Run the development server, log in, and update the user language to test the newly translated strings. Once the translation is complete, commit the new files and changes to a fork and create a pull request for review. For more information on the Django translation process, see Django's documentation section: Translation .","title":"Manual"},{"location":"contributing/#development","text":"","title":"Development"},{"location":"contributing/#requirements","text":"Python 3.6+, pip, pipenv NVM (NodeJS 14.x and NPM 7.x) Gulp Possibly libpq-dev This is necessary if psycopg2 can't find an appropriate prebuilt binary.","title":"Requirements"},{"location":"contributing/#installation","text":"Install pipenv per Installing pipenv Install required Python packages, including dev packages pipenv install --three --dev If this fails, install libpq-dev (e.g. sudo apt install libpq-dev ) and try again. Installed Node 14.x (if necessary) nvm install 14 Activate Node 14.x nvm use Install Gulp CLI npm install -g gulp-cli Install required Node packages npm install Set, at least, the DJANGO_SETTINGS_MODULE environment variable export DJANGO_SETTINGS_MODULE=babybuddy.settings.development This process will differ based on the host OS. The above example is for Linux-based systems. See Configuration for other settings and methods for defining them. Migrate the database gulp migrate Create cache table gulp createcachetable Build assets and run the server gulp This command will also watch for file system changes to rebuild assets and restart the server as needed. Open http://127.0.0.1:8000 and log in with the default username and password ( admin / admin ).","title":"Installation"},{"location":"contributing/#gulp-commands","text":"gulpfile.js defines Baby Buddy's Gulp commands. babybuddy/management/commands defines Baby Buddy's management commands. gulp gulp build gulp clean gulp collectstatic gulp compilemessages gulp coverage gulp createcachetable gulp docs:build gulp docs:deploy gulp docs:watch gulp extras gulp fake gulp generatescheme gulp lint gulp makemessages gulp makemigrations gulp migrate gulp reset gulp runserver gulp scripts gulp styles gulp test gulp updatestatic","title":"Gulp commands"},{"location":"contributing/#gulp","text":"Executes the build and watch commands and runs Django's development server. This command also accepts the special parameter --ip for setting the server IP address. See gulp runserver for details.","title":"gulp"},{"location":"contributing/#build","text":"Creates all script, style and \"extra\" assets and places them in the babybuddy/static folder.","title":"build"},{"location":"contributing/#docsbuild","text":"Builds the documentation site in a local directory ( site by default).","title":"docs:build"},{"location":"contributing/#docsdeploy","text":"Deploys the documentation site to GitHub Pages.","title":"docs:deploy"},{"location":"contributing/#docswatch","text":"Runs a local server for the documentation site reloading whenever documentation sites files (in the docs directory) as modified.","title":"docs:watch"},{"location":"contributing/#clean","text":"Deletes all build folders and the root static folder. Generally this should be run before a gulp build to remove previous build files and the generated static assets.","title":"clean"},{"location":"contributing/#collectstatic","text":"Executes Django's collectstatic management task. This task relies on files in the babybuddy/static folder, so generally gulp build should be run before this command for production deployments. Gulp also passes along non-overlapping arguments for this command, e.g. --no-input . Note: a SECRET_KEY value must be set for this command to work.","title":"collectstatic"},{"location":"contributing/#compilemessages","text":"Executes Django's compilemessages management task. See django-admin compilemessages for more details about other options and functionality of this command.","title":"compilemessages"},{"location":"contributing/#coverage","text":"Create a test coverage report. See .coveragerc for default settings information.","title":"coverage"},{"location":"contributing/#createcachetable","text":"Executes Django's createcachetable management task. See django-admin createcachetable for more details about other options and functionality of this command.","title":"createcachetable"},{"location":"contributing/#extras","text":"Copies \"extra\" files (fonts, images and server root contents) to the build folder.","title":"extras"},{"location":"contributing/#fake","text":"Adds some fake data to the database. By default, fake creates one child and 31 days of random data. Use the --children and --days flags to change the default values, e.g. gulp fake --children 5 --days 7 to generate five fake children and seven days of data for each.","title":"fake"},{"location":"contributing/#generateschema","text":"Updates the openapi-schema.yml file in the project root based on current API functionality.","title":"generateschema"},{"location":"contributing/#lint","text":"Executes Python and SASS linting for all relevant source files.","title":"lint"},{"location":"contributing/#makemessages","text":"Executes Django's makemessages management task. See django-admin makemessages for more details about other options and functionality of this command. When working on a single translation, the -l flag is useful to make message for only that language, e.g. gulp makemessages -l fr to make only a French language translation file.","title":"makemessages"},{"location":"contributing/#makemigrations","text":"Executes Django's makemigrations management task. Gulp also passes along non-overlapping arguments for this command.","title":"makemigrations"},{"location":"contributing/#migrate","text":"Executes Django's migrate management task. In addition to migrating the database, this command creates the default admin user. Gulp also passes along non-overlapping arguments for this command.","title":"migrate"},{"location":"contributing/#reset","text":"Resets the database to a default state with one fake child and 31 days of fake data.","title":"reset"},{"location":"contributing/#runserver","text":"Executes Django's runserver management task. Gulp passes non-overlapping arguments for this command. A special parameter, --ip , is also available to set the IP for the server. E.g., execute gulp runserver --ip 0.0.0.0:8000 to make the server available to other devices on your local network.","title":"runserver"},{"location":"contributing/#scripts","text":"Builds and combines relevant application scripts. Generally this command does not need to be executed independently - see the build command.","title":"scripts"},{"location":"contributing/#styles","text":"Builds and combines SASS styles in to CSS files. Generally this command does not need to be executed independently - see the build command.","title":"styles"},{"location":"contributing/#test","text":"Executes Baby Buddy's suite of tests. Gulp also passes along non-overlapping arguments for this command, however individual tests cannot be run with this command. python manage.py test can be used for individual test execution.","title":"test"},{"location":"contributing/#updateglyphs","text":"Downloads generated glyph font files data from Fonttello based on config.json file . This only needs to be run after making changes to the config file.","title":"updateglyphs"},{"location":"contributing/#updatestatic","text":"Rebuilds Baby Buddy's /static folder by running the following commands in order: lint clean build collectstatic Execute and commit changes made by this command whenever changing Baby Buddy's frontend code (SASS, JS, etc.).","title":"updatestatic"},{"location":"contributing/#icon-font","text":"Baby Buddy uses Fontello to build a custom icon font for icons used throughout the application. See babybuddy/static_src/fontello for further documentation about using the config file with Fontello and license information for fonts used by this application.","title":"Icon Font"},{"location":"deployment/","text":"Deployment The default username and password for Baby Buddy is admin / admin . For any deployment, log in and change the default password immediately . Many of Baby Buddy's configuration settings can be controlled using environment variables - see Configuration for detailed information. Docker Baby Buddy relies on the LinuxServer.io community for a multi-architecture container with strong support. See linuxserver/docker-babybuddy for detailed information about the container or use the following Docker Compose configuration as a template to get started quickly: version: \"2.1\" services: babybuddy: image: ghcr.io/linuxserver/babybuddy container_name: babybuddy environment: - TZ=UTC volumes: - /path/to/appdata:/config ports: - 8000:8000 restart: unless-stopped :warning: Baby Buddy v1.7.0 was the final version deployed to babybuddy/babybuddy on Docker Hub Future versions of Baby Buddy will use the LSIO container. For doing administrative work within the LSIO container, setting an environment variable may be necessary. For example: docker exec -it babybuddy /bin/bash export DJANGO_SETTINGS_MODULE=\"babybuddy.settings.base\" python3 /app/babybuddy/manage.py clearsessions Heroku For manual deployments to Heroku without using the \"deploy\" button, make sure to create the following settings before pushing: heroku config:set DJANGO_SETTINGS_MODULE=babybuddy.settings.heroku heroku config:set SECRET_KEY=<CHANGE TO SOMETHING RANDOM> heroku config:set DISABLE_COLLECTSTATIC=1 heroku config:set TIME_ZONE=<DESIRED DEFAULT TIMEZONE> See Configuration for other settings that can be controlled by heroku config:set . After an initial push, execute the following commands: heroku run python manage.py migrate heroku run python manage.py createcachetable Manual There are many ways to deploy Baby Buddy manually to any server/VPS. The basic requirements are Python, a web server, an application server, and a database. Requirements Python 3.6+, pip, pipenv Web server ( nginx , Apache , etc.) Application server ( uwsgi , gunicorn , etc.) Database ( sqlite , Postgres , MySQL , etc.) Example deployment This example assumes a 512 MB VPS instance with Ubuntu 18.04. It uses Python 3.6+, nginx, uwsgi and sqlite. It should be sufficient for a few users(e.g., two parents and 1+ child). Install system packages sudo apt-get install python3 python3-pip nginx uwsgi uwsgi-plugin-python3 git libopenjp2-7-dev libpq-dev Default python3 to python for this session alias python=python3 Install pipenv sudo -H pip3 install pipenv Set up directories and files sudo mkdir /var/www/babybuddy sudo chown $USER:$(id -gn $USER) /var/www/babybuddy mkdir -p /var/www/babybuddy/data/media git clone https://github.com/babybuddy/babybuddy.git /var/www/babybuddy/public Move in to the application folder cd /var/www/babybuddy/public Set pipenv to install locally. export PIPENV_VENV_IN_PROJECT=1 Initiate and enter the Python environment pipenv install --three pipenv shell Create a production settings file and set the SECRET_KEY and ALLOWED_HOSTS values cp babybuddy/settings/production.example.py babybuddy/settings/production.py editor babybuddy/settings/production.py Initiate the application export DJANGO_SETTINGS_MODULE=babybuddy.settings.production python manage.py migrate python manage.py createcachetable Set appropriate permissions on the database and data folder sudo chown -R www-data:www-data /var/www/babybuddy/data sudo chmod 640 /var/www/babybuddy/data/db.sqlite3 sudo chmod 750 /var/www/babybuddy/data Create and configure the uwsgi app sudo editor /etc/uwsgi/apps-available/babybuddy.ini Example config: [uwsgi] plugins = python3 project = babybuddy base_dir = /var/www/babybuddy chdir = %(base_dir)/public virtualenv = %(chdir)/.venv module = %(project).wsgi:application env = DJANGO_SETTINGS_MODULE=%(project).settings.production master = True vacuum = True See the uWSGI documentation for more advanced configuration details. Symlink config and restart uWSGI: sudo ln -s /etc/uwsgi/apps-available/babybuddy.ini /etc/uwsgi/apps-enabled/babybuddy.ini sudo service uwsgi restart Create and configure the nginx server sudo editor /etc/nginx/sites-available/babybuddy Example config: upstream babybuddy { server unix:///var/run/uwsgi/app/babybuddy/socket; } server { listen 80; server_name babybuddy.example.com; location / { uwsgi_pass babybuddy; include uwsgi_params; } location /media { alias /var/www/babybuddy/data/media; } } See the nginx documentation for more advanced configuration details. Symlink config and restart NGINX: sudo ln -s /etc/nginx/sites-available/babybuddy /etc/nginx/sites-enabled/babybuddy sudo service nginx restart That's it (hopefully)! :tada:","title":"Deployment"},{"location":"deployment/#deployment","text":"The default username and password for Baby Buddy is admin / admin . For any deployment, log in and change the default password immediately . Many of Baby Buddy's configuration settings can be controlled using environment variables - see Configuration for detailed information.","title":"Deployment"},{"location":"deployment/#docker","text":"Baby Buddy relies on the LinuxServer.io community for a multi-architecture container with strong support. See linuxserver/docker-babybuddy for detailed information about the container or use the following Docker Compose configuration as a template to get started quickly: version: \"2.1\" services: babybuddy: image: ghcr.io/linuxserver/babybuddy container_name: babybuddy environment: - TZ=UTC volumes: - /path/to/appdata:/config ports: - 8000:8000 restart: unless-stopped :warning: Baby Buddy v1.7.0 was the final version deployed to babybuddy/babybuddy on Docker Hub Future versions of Baby Buddy will use the LSIO container. For doing administrative work within the LSIO container, setting an environment variable may be necessary. For example: docker exec -it babybuddy /bin/bash export DJANGO_SETTINGS_MODULE=\"babybuddy.settings.base\" python3 /app/babybuddy/manage.py clearsessions","title":"Docker"},{"location":"deployment/#heroku","text":"For manual deployments to Heroku without using the \"deploy\" button, make sure to create the following settings before pushing: heroku config:set DJANGO_SETTINGS_MODULE=babybuddy.settings.heroku heroku config:set SECRET_KEY=<CHANGE TO SOMETHING RANDOM> heroku config:set DISABLE_COLLECTSTATIC=1 heroku config:set TIME_ZONE=<DESIRED DEFAULT TIMEZONE> See Configuration for other settings that can be controlled by heroku config:set . After an initial push, execute the following commands: heroku run python manage.py migrate heroku run python manage.py createcachetable","title":"Heroku"},{"location":"deployment/#manual","text":"There are many ways to deploy Baby Buddy manually to any server/VPS. The basic requirements are Python, a web server, an application server, and a database.","title":"Manual"},{"location":"deployment/#requirements","text":"Python 3.6+, pip, pipenv Web server ( nginx , Apache , etc.) Application server ( uwsgi , gunicorn , etc.) Database ( sqlite , Postgres , MySQL , etc.)","title":"Requirements"},{"location":"deployment/#example-deployment","text":"This example assumes a 512 MB VPS instance with Ubuntu 18.04. It uses Python 3.6+, nginx, uwsgi and sqlite. It should be sufficient for a few users(e.g., two parents and 1+ child). Install system packages sudo apt-get install python3 python3-pip nginx uwsgi uwsgi-plugin-python3 git libopenjp2-7-dev libpq-dev Default python3 to python for this session alias python=python3 Install pipenv sudo -H pip3 install pipenv Set up directories and files sudo mkdir /var/www/babybuddy sudo chown $USER:$(id -gn $USER) /var/www/babybuddy mkdir -p /var/www/babybuddy/data/media git clone https://github.com/babybuddy/babybuddy.git /var/www/babybuddy/public Move in to the application folder cd /var/www/babybuddy/public Set pipenv to install locally. export PIPENV_VENV_IN_PROJECT=1 Initiate and enter the Python environment pipenv install --three pipenv shell Create a production settings file and set the SECRET_KEY and ALLOWED_HOSTS values cp babybuddy/settings/production.example.py babybuddy/settings/production.py editor babybuddy/settings/production.py Initiate the application export DJANGO_SETTINGS_MODULE=babybuddy.settings.production python manage.py migrate python manage.py createcachetable Set appropriate permissions on the database and data folder sudo chown -R www-data:www-data /var/www/babybuddy/data sudo chmod 640 /var/www/babybuddy/data/db.sqlite3 sudo chmod 750 /var/www/babybuddy/data Create and configure the uwsgi app sudo editor /etc/uwsgi/apps-available/babybuddy.ini Example config: [uwsgi] plugins = python3 project = babybuddy base_dir = /var/www/babybuddy chdir = %(base_dir)/public virtualenv = %(chdir)/.venv module = %(project).wsgi:application env = DJANGO_SETTINGS_MODULE=%(project).settings.production master = True vacuum = True See the uWSGI documentation for more advanced configuration details. Symlink config and restart uWSGI: sudo ln -s /etc/uwsgi/apps-available/babybuddy.ini /etc/uwsgi/apps-enabled/babybuddy.ini sudo service uwsgi restart Create and configure the nginx server sudo editor /etc/nginx/sites-available/babybuddy Example config: upstream babybuddy { server unix:///var/run/uwsgi/app/babybuddy/socket; } server { listen 80; server_name babybuddy.example.com; location / { uwsgi_pass babybuddy; include uwsgi_params; } location /media { alias /var/www/babybuddy/data/media; } } See the nginx documentation for more advanced configuration details. Symlink config and restart NGINX: sudo ln -s /etc/nginx/sites-available/babybuddy /etc/nginx/sites-enabled/babybuddy sudo service nginx restart That's it (hopefully)! :tada:","title":"Example deployment"},{"location":"import_export/","text":"Import/Export Baby Buddy uses the django-import-export application to provide import and export functionality. Export Export actions are accessible from Baby Buddy's \"Database Admin\" area (the Django admin interface). For example, to export all diaper change entries from Baby Buddy as an Excel file: Log in as a user with \"staff\" access. From the user menu, click \"Database Admin\" under the \"Site\" heading. Click \"Diaper Changes\" in the list of data types. Click the \"Export\" button above the filters list on the right side of the screen. Select the \"xlxs\" format and click \"Submit\" Note: any applied filters will also filter the exported entries. Alternatively, on the Diaper Change list screen (step 3 above), it is possible to select one or many individual records and select \"Export selected Diaper Changes\" from the \"Actions\" list. Import Import actions are accessible from Baby Buddy's \"Database Admin\" area (the Django admin interface). From the list of entry types in the Database Admin, select the type to import and click the \"Import\" button on the list page. The import screen for a particular type will list the fields generally expected to be present for an import. Multiple file types -- including csv, xlsx, etc. -- are supported for the import. The import pages do not provide detailed information about the required data and formats. All rows will be checked for errors on import and any issues will be reported on screen and will need to be resolved before the import can be performed. See the example import files used for tests to get an idea of the expected data format.","title":"Import/Export"},{"location":"import_export/#importexport","text":"Baby Buddy uses the django-import-export application to provide import and export functionality.","title":"Import/Export"},{"location":"import_export/#export","text":"Export actions are accessible from Baby Buddy's \"Database Admin\" area (the Django admin interface). For example, to export all diaper change entries from Baby Buddy as an Excel file: Log in as a user with \"staff\" access. From the user menu, click \"Database Admin\" under the \"Site\" heading. Click \"Diaper Changes\" in the list of data types. Click the \"Export\" button above the filters list on the right side of the screen. Select the \"xlxs\" format and click \"Submit\" Note: any applied filters will also filter the exported entries. Alternatively, on the Diaper Change list screen (step 3 above), it is possible to select one or many individual records and select \"Export selected Diaper Changes\" from the \"Actions\" list.","title":"Export"},{"location":"import_export/#import","text":"Import actions are accessible from Baby Buddy's \"Database Admin\" area (the Django admin interface). From the list of entry types in the Database Admin, select the type to import and click the \"Import\" button on the list page. The import screen for a particular type will list the fields generally expected to be present for an import. Multiple file types -- including csv, xlsx, etc. -- are supported for the import. The import pages do not provide detailed information about the required data and formats. All rows will be checked for errors on import and any issues will be reported on screen and will need to be resolved before the import can be performed. See the example import files used for tests to get an idea of the expected data format.","title":"Import"}]}